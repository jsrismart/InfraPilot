INFO:real_time_pricing_fetcher:AWS Pricing API client initialized
INFO:real_time_pricing_fetcher:Azure Pricing Fetcher initialized (using Azure Retail Prices API)
INFO:azure_resource_validator:[VALIDATOR] Azure Resource Validator initialized - Cache DISABLED
INFO:pricing_calculator:[PRICING] Processing terraform code (802 chars)
INFO:pricing_calculator:[PRICING] Terraform preview: provider "azurerm" {
  features {}
}

variable "project_name" {
  type    = string
  default = "testproject"
}

resource "azurerm_resource_group" "main" {
  name     = "${var.project_name}-rg"
  location = "eastus"
}

resource "azurerm_virtual_machine" "test" {
  name                  = "${var.proje...
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_resource_group 'main'
INFO:azure_resource_validator:[VALIDATOR] \u2713 resource_group is free in Azure - valid
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_resource_group.main - resource_group is supported (FREE)
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_virtual_machine 'test'
WARNING:azure_resource_validator:[VALIDATOR] \u2717 VM SKU 'Standard_C2s_v3' not found in Azure API
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_virtual_machine.test - VM SKU 'Standard_C2s_v3' not found in Azure pricing
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_resource_group, name=main
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'eastus', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'eastus'
INFO:pricing_calculator:Adding resource: main (azurerm_resource_group) on azure
INFO:pricing_calculator:[PRICING] Added resource: main (type=azurerm_resource_group, instance_type=None)
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_virtual_machine, name=test
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'azurerm_resource_group.main.location', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Found instance_type 'Standard_C2s_v3' from property 'vm_size'
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'azurerm_resource_group.main.location'
INFO:pricing_calculator:[PRICING] Region contains reference, attempting to extract actual value...
INFO:pricing_calculator:[PRICING] Found resource block for azurerm_resource_group.main (body length: 61)
INFO:pricing_calculator:[PRICING] Searching for property 'location' in resource body (length: 61)
INFO:pricing_calculator:[PRICING] Resource body preview: 
  name     = "${var.project_name}-rg"
  location = "eastus"
...
INFO:pricing_calculator:[PRICING] Trying pattern 1: location\s*=\s*"([^"]*)"
INFO:pricing_calculator:[PRICING] \u2713 Pattern 1 matched! Resolved Terraform reference 'azurerm_resource_group.main.location' \u2192 'eastus'
INFO:pricing_calculator:[PRICING] \u2713 Resolved region reference to 'eastus'
INFO:pricing_calculator:Adding resource: test (azurerm_virtual_machine) on azure
INFO:pricing_calculator:[PRICING] Added resource: test (type=azurerm_virtual_machine, instance_type=Standard_C2s_v3)
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_resource_group, instance_type=None, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Resource Group is FREE in Azure
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_virtual_machine, instance_type=Standard_C2s_v3, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Normalized VM size: 'Standard_C2s_v3' \u2192 'Standard_C2s_v3'
INFO:pricing_calculator:[AZURE_PRICING] Normalized region: 'eastus' \u2192 'eastus'
INFO:pricing_calculator:[AZURE_PRICING] OS type detected: windows
INFO:pricing_calculator:[AZURE_PRICING] Calling Azure API for VM: 'Standard_C2s_v3' in 'eastus' (OS: windows)
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] VM Standard_C2s_v3 not available in Azure API, using fallback: Standard_D2s_v3
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] No pricing found for Standard_C2s_v3, retrying with fallback: Standard_D2s_v3
INFO:real_time_pricing_fetcher:\u2713 Azure VM pricing from API: Standard_C2s_v3 (fallback: Standard_D2s_v3) in eastus = $0.0960/hr ($70.08/month)
INFO:pricing_calculator:[AZURE_PRICING] \u2713 Azure API returned: $70.08/month \u2192 Total: $70.08/month
INFO:pricing_calculator:[PRICING] Processing terraform code (802 chars)
INFO:pricing_calculator:[PRICING] Terraform preview: provider "azurerm" {
  features {}
}

variable "project_name" {
  type    = string
  default = "testproject"
}

resource "azurerm_resource_group" "main" {
  name     = "${var.project_name}-rg"
  location = "eastus"
}

resource "azurerm_virtual_machine" "test" {
  name                  = "${var.proje...
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_resource_group 'main'
INFO:azure_resource_validator:[VALIDATOR] \u2713 resource_group is free in Azure - valid
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_resource_group.main - resource_group is supported (FREE)
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_virtual_machine 'test'
WARNING:azure_resource_validator:[VALIDATOR] \u2717 VM SKU 'Standard_C4s_v3' not found in Azure API
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_virtual_machine.test - VM SKU 'Standard_C4s_v3' not found in Azure pricing
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_resource_group, name=main
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'eastus', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'eastus'
INFO:pricing_calculator:Adding resource: main (azurerm_resource_group) on azure
INFO:pricing_calculator:[PRICING] Added resource: main (type=azurerm_resource_group, instance_type=None)
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_virtual_machine, name=test
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'azurerm_resource_group.main.location', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Found instance_type 'Standard_C4s_v3' from property 'vm_size'
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'azurerm_resource_group.main.location'
INFO:pricing_calculator:[PRICING] Region contains reference, attempting to extract actual value...
INFO:pricing_calculator:[PRICING] Found resource block for azurerm_resource_group.main (body length: 61)
INFO:pricing_calculator:[PRICING] Searching for property 'location' in resource body (length: 61)
INFO:pricing_calculator:[PRICING] Resource body preview: 
  name     = "${var.project_name}-rg"
  location = "eastus"
...
INFO:pricing_calculator:[PRICING] Trying pattern 1: location\s*=\s*"([^"]*)"
INFO:pricing_calculator:[PRICING] \u2713 Pattern 1 matched! Resolved Terraform reference 'azurerm_resource_group.main.location' \u2192 'eastus'
INFO:pricing_calculator:[PRICING] \u2713 Resolved region reference to 'eastus'
INFO:pricing_calculator:Adding resource: test (azurerm_virtual_machine) on azure
INFO:pricing_calculator:[PRICING] Added resource: test (type=azurerm_virtual_machine, instance_type=Standard_C4s_v3)
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_resource_group, instance_type=None, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Resource Group is FREE in Azure
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_virtual_machine, instance_type=Standard_C4s_v3, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Normalized VM size: 'Standard_C4s_v3' \u2192 'Standard_C4s_v3'
INFO:pricing_calculator:[AZURE_PRICING] Normalized region: 'eastus' \u2192 'eastus'
INFO:pricing_calculator:[AZURE_PRICING] OS type detected: windows
INFO:pricing_calculator:[AZURE_PRICING] Calling Azure API for VM: 'Standard_C4s_v3' in 'eastus' (OS: windows)
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] VM Standard_C4s_v3 not available in Azure API, using fallback: Standard_D4s_v3
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] No pricing found for Standard_C4s_v3, retrying with fallback: Standard_D4s_v3
INFO:real_time_pricing_fetcher:\u2713 Azure VM pricing from API: Standard_C4s_v3 (fallback: Standard_D4s_v3) in eastus = $0.3760/hr ($274.48/month)
INFO:pricing_calculator:[AZURE_PRICING] \u2713 Azure API returned: $274.48/month \u2192 Total: $274.48/month
INFO:pricing_calculator:[PRICING] Processing terraform code (802 chars)
INFO:pricing_calculator:[PRICING] Terraform preview: provider "azurerm" {
  features {}
}

variable "project_name" {
  type    = string
  default = "testproject"
}

resource "azurerm_resource_group" "main" {
  name     = "${var.project_name}-rg"
  location = "eastus"
}

resource "azurerm_virtual_machine" "test" {
  name                  = "${var.proje...
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_resource_group 'main'
INFO:azure_resource_validator:[VALIDATOR] \u2713 resource_group is free in Azure - valid
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_resource_group.main - resource_group is supported (FREE)
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_virtual_machine 'test'
WARNING:azure_resource_validator:[VALIDATOR] \u2717 VM SKU 'Standard_C4c_v3' not found in Azure API
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_virtual_machine.test - VM SKU 'Standard_C4c_v3' not found in Azure pricing
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_resource_group, name=main
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'eastus', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'eastus'
INFO:pricing_calculator:Adding resource: main (azurerm_resource_group) on azure
INFO:pricing_calculator:[PRICING] Added resource: main (type=azurerm_resource_group, instance_type=None)
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_virtual_machine, name=test
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'azurerm_resource_group.main.location', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Found instance_type 'Standard_C4c_v3' from property 'vm_size'
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'azurerm_resource_group.main.location'
INFO:pricing_calculator:[PRICING] Region contains reference, attempting to extract actual value...
INFO:pricing_calculator:[PRICING] Found resource block for azurerm_resource_group.main (body length: 61)
INFO:pricing_calculator:[PRICING] Searching for property 'location' in resource body (length: 61)
INFO:pricing_calculator:[PRICING] Resource body preview: 
  name     = "${var.project_name}-rg"
  location = "eastus"
...
INFO:pricing_calculator:[PRICING] Trying pattern 1: location\s*=\s*"([^"]*)"
INFO:pricing_calculator:[PRICING] \u2713 Pattern 1 matched! Resolved Terraform reference 'azurerm_resource_group.main.location' \u2192 'eastus'
INFO:pricing_calculator:[PRICING] \u2713 Resolved region reference to 'eastus'
INFO:pricing_calculator:Adding resource: test (azurerm_virtual_machine) on azure
INFO:pricing_calculator:[PRICING] Added resource: test (type=azurerm_virtual_machine, instance_type=Standard_C4c_v3)
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_resource_group, instance_type=None, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Resource Group is FREE in Azure
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_virtual_machine, instance_type=Standard_C4c_v3, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Normalized VM size: 'Standard_C4c_v3' \u2192 'Standard_C4c_v3'
INFO:pricing_calculator:[AZURE_PRICING] Normalized region: 'eastus' \u2192 'eastus'
INFO:pricing_calculator:[AZURE_PRICING] OS type detected: windows
INFO:pricing_calculator:[AZURE_PRICING] Calling Azure API for VM: 'Standard_C4c_v3' in 'eastus' (OS: windows)
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] VM Standard_C4c_v3 not available in Azure API, using fallback: Standard_D4s_v3
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] No pricing found for Standard_C4c_v3, retrying with fallback: Standard_D4s_v3
INFO:real_time_pricing_fetcher:\u2713 Azure VM pricing from API: Standard_C4c_v3 (fallback: Standard_D4s_v3) in eastus = $0.3760/hr ($274.48/month)
INFO:pricing_calculator:[AZURE_PRICING] \u2713 Azure API returned: $274.48/month \u2192 Total: $274.48/month
INFO:pricing_calculator:[PRICING] Processing terraform code (802 chars)
INFO:pricing_calculator:[PRICING] Terraform preview: provider "azurerm" {
  features {}
}

variable "project_name" {
  type    = string
  default = "testproject"
}

resource "azurerm_resource_group" "main" {
  name     = "${var.project_name}-rg"
  location = "eastus"
}

resource "azurerm_virtual_machine" "test" {
  name                  = "${var.proje...
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_resource_group 'main'
INFO:azure_resource_validator:[VALIDATOR] \u2713 resource_group is free in Azure - valid
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_resource_group.main - resource_group is supported (FREE)
INFO:azure_resource_validator:[VALIDATOR] Validating azurerm_virtual_machine 'test'
WARNING:azure_resource_validator:[VALIDATOR] \u2717 VM SKU 'Standard_C8s_v3' not found in Azure API
INFO:diagram_generator:[PARSER] Azure resource validation: azurerm_virtual_machine.test - VM SKU 'Standard_C8s_v3' not found in Azure pricing
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_resource_group, name=main
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'eastus', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'eastus'
INFO:pricing_calculator:Adding resource: main (azurerm_resource_group) on azure
INFO:pricing_calculator:[PRICING] Added resource: main (type=azurerm_resource_group, instance_type=None)
INFO:pricing_calculator:[PRICING] Processing resource: type=azurerm_virtual_machine, name=test
INFO:pricing_calculator:[PRICING] Using resource.config: {'region': 'azurerm_resource_group.main.location', 'os_type': 'windows'}
INFO:pricing_calculator:[PRICING] Found instance_type 'Standard_C8s_v3' from property 'vm_size'
INFO:pricing_calculator:[PRICING] Extracted region/location from properties: 'azurerm_resource_group.main.location'
INFO:pricing_calculator:[PRICING] Region contains reference, attempting to extract actual value...
INFO:pricing_calculator:[PRICING] Found resource block for azurerm_resource_group.main (body length: 61)
INFO:pricing_calculator:[PRICING] Searching for property 'location' in resource body (length: 61)
INFO:pricing_calculator:[PRICING] Resource body preview: 
  name     = "${var.project_name}-rg"
  location = "eastus"
...
INFO:pricing_calculator:[PRICING] Trying pattern 1: location\s*=\s*"([^"]*)"
INFO:pricing_calculator:[PRICING] \u2713 Pattern 1 matched! Resolved Terraform reference 'azurerm_resource_group.main.location' \u2192 'eastus'
INFO:pricing_calculator:[PRICING] \u2713 Resolved region reference to 'eastus'
INFO:pricing_calculator:Adding resource: test (azurerm_virtual_machine) on azure
INFO:pricing_calculator:[PRICING] Added resource: test (type=azurerm_virtual_machine, instance_type=Standard_C8s_v3)
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_resource_group, instance_type=None, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Resource Group is FREE in Azure
INFO:pricing_calculator:[AZURE_PRICING] Calculating cost for: type=azurerm_virtual_machine, instance_type=Standard_C8s_v3, qty=1
INFO:pricing_calculator:[AZURE_PRICING] Normalized VM size: 'Standard_C8s_v3' \u2192 'Standard_C8s_v3'
INFO:pricing_calculator:[AZURE_PRICING] Normalized region: 'eastus' \u2192 'eastus'
INFO:pricing_calculator:[AZURE_PRICING] OS type detected: windows
INFO:pricing_calculator:[AZURE_PRICING] Calling Azure API for VM: 'Standard_C8s_v3' in 'eastus' (OS: windows)
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] VM Standard_C8s_v3 not available in Azure API, using fallback: Standard_D8s_v3
WARNING:real_time_pricing_fetcher:[AZURE_FALLBACK] No pricing found for Standard_C8s_v3, retrying with fallback: Standard_D8s_v3
INFO:real_time_pricing_fetcher:\u2713 Azure VM pricing from API: Standard_C8s_v3 (fallback: Standard_D8s_v3) in eastus = $0.7520/hr ($548.96/month)
INFO:pricing_calculator:[AZURE_PRICING] \u2713 Azure API returned: $548.96/month \u2192 Total: $548.96/month
================================================================================
C-SERIES VM PRICING FIX - COMPREHENSIVE TEST
================================================================================

--------------------------------------------------------------------------------
Test: Small C-series (C2s_v3)
VM Size: Standard_C2s_v3
Expected Fallback: Standard_D2s_v3
--------------------------------------------------------------------------------
[PASS] Pricing retrieved successfully
  Total Cost: $70.08/month

--------------------------------------------------------------------------------
Test: Medium C-series (C4s_v3)
VM Size: Standard_C4s_v3
Expected Fallback: Standard_D4s_v3
--------------------------------------------------------------------------------
[PASS] Pricing retrieved successfully
  Total Cost: $274.48/month

--------------------------------------------------------------------------------
Test: Compute-optimized (C4c_v3)
VM Size: Standard_C4c_v3
Expected Fallback: Standard_D4s_v3
--------------------------------------------------------------------------------
[PASS] Pricing retrieved successfully
  Total Cost: $274.48/month

--------------------------------------------------------------------------------
Test: Large C-series (C8s_v3)
VM Size: Standard_C8s_v3
Expected Fallback: Standard_D8s_v3
--------------------------------------------------------------------------------
[PASS] Pricing retrieved successfully
  Total Cost: $548.96/month

================================================================================
TEST COMPLETE
================================================================================

Summary:
  - C-series VMs now have fallback pricing
  - Pricing is calculated using D-series equivalents
  - All requests return valid pricing data
  - No more 'AZURE API RETURNED NO PRICE' errors
